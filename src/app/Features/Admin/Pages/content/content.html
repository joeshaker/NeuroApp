<div class="content-page">
  <div class="page-header mb-4">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h3><i class="fas fa-photo-video me-2"></i>Content Management</h3>
        <p class="text-muted mb-0">Manage course modules and videos</p>
      </div>
    </div>
  </div>

  <ul class="nav nav-tabs mb-4">
    <li class="nav-item">
      <a
        class="nav-link"
        [class.active]="activeTab === 'modules'"
        (click)="setActiveTab('modules')"
        style="cursor: pointer;"
      >
        <i class="fas fa-book me-2"></i>Modules ({{ modules.length }})
      </a>
    </li>
    <li class="nav-item">
      <a
        class="nav-link"
        [class.active]="activeTab === 'videos'"
        (click)="setActiveTab('videos')"
        style="cursor: pointer;"
      >
        <i class="fas fa-video me-2"></i>Videos ({{ videos.length }})
      </a>
    </li>
  </ul>

  <div *ngIf="activeTab === 'modules' && !loading">
    <div class="table-container">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Module ID</th>
            <th>Module Name</th>
            <th>Course</th>
            <th>Description</th>
            <th>Order</th>
            <th>Videos</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let module of modules">
            <td>{{ module.moduleId }}</td>
            <td><strong>{{ module.moduleName }}</strong></td>
            <td>{{ getCourseName(module.courseId) }}</td>
            <td>{{ module.moduleDescription }}</td>
            <td>
              <span class="badge bg-secondary">{{ module.moduleOrder }}</span>
            </td>
            <td>
              <span class="badge bg-info">{{ getModuleVideosCount(module.moduleId) }} videos</span>
            </td>
            <td>
              <button
                class="btn btn-sm btn-danger"
                (click)="deleteModule(module.moduleId)"
              >
                <i class="fas fa-trash"></i>
              </button>
            </td>
          </tr>
          <tr *ngIf="modules.length === 0">
            <td colspan="7" class="text-center text-muted py-4">
              No modules found
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div *ngIf="activeTab === 'videos' && !loading">
    <div class="table-container">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Video ID</th>
            <th>Title</th>
            <th>Module</th>
            <th>Duration</th>
            <th>Order</th>
            <th>Video URL</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let video of videos">
            <td>{{ video.id }}</td>
            <td><strong>{{ video.title }}</strong></td>
            <td>{{ getModuleName(video.moduleId) }}</td>
            <td>
              <span *ngIf="video.duration">{{ video.duration }} min</span>
              <span *ngIf="!video.duration" class="text-muted">N/A</span>
            </td>
            <td>
              <span class="badge bg-secondary">{{ video.videoOrder }}</span>
            </td>
            <td>
              <a [href]="video.videoUrl" target="_blank" class="btn btn-sm btn-outline-primary">
                <i class="fas fa-external-link-alt"></i> View
              </a>
            </td>
            <td>
              <button
                class="btn btn-sm btn-danger"
                (click)="deleteVideo(video.id)"
              >
                <i class="fas fa-trash"></i>
              </button>
            </td>
          </tr>
          <tr *ngIf="videos.length === 0">
            <td colspan="7" class="text-center text-muted py-4">
              No videos found
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="text-center py-5" *ngIf="loading">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-3">Loading content...</p>
  </div>
</div>
