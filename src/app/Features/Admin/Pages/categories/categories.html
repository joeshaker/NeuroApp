<!-- Categories Management Page -->
<div class="categories-page">
  <div class="page-header mb-4">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h3><i class="fas fa-tags me-2"></i>Categories Management</h3>
        <p class="text-muted mb-0">Organize and manage course categories</p>
      </div>
      <button class="btn btn-success" (click)="showAddCategoryModal()">
        <i class="fas fa-plus me-2"></i>Add Category
      </button>
    </div>
  </div>

  <!-- Categories Grid -->
  <div class="categories-grid">
    <div class="row">
      <div class="col-md-4 mb-4" *ngFor="let category of categories">
        <div class="category-card">
          <div class="category-header">
            <h5>{{ category.name }}</h5>
            <div class="category-actions">
              <button class="btn btn-sm btn-outline-primary me-2" (click)="editCategory(category)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn btn-sm btn-outline-danger" (click)="confirmDelete(category)">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
          <p class="category-description">{{ category.description }}</p>
          <div class="category-footer">
            <span class="badge" [class.bg-success]="category.isActive" [class.bg-secondary]="!category.isActive">
              {{ category.isActive ? 'Active' : 'Inactive' }}
            </span>
            <span class="products-count">
              <i class="fas fa-graduation-cap me-1"></i>{{ category.coursesCount || 0 }} courses
            </span>
          </div>
        </div>
      </div>

      <div class="col-12" *ngIf="categories.length === 0 && !loading">
        <div class="text-center text-muted py-5">
          <i class="fas fa-tags fa-3x mb-3 d-block"></i>
          <p>No categories found</p>
          <button class="btn btn-primary" (click)="showAddCategoryModal()">
            <i class="fas fa-plus me-2"></i>Create First Category
          </button>
        </div>
      </div>

      <div class="col-12" *ngIf="loading">
        <div class="text-center py-5">
          <div class="spinner-border text-primary" role="status"></div>
          <p class="mt-3">Loading categories...</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Add Category Modal -->
<div class="modal fade" [class.show]="showAddModal" [style.display]="showAddModal ? 'block' : 'none'" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add New Category</h5>
        <button type="button" class="btn-close" (click)="closeModals()"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label class="form-label">Category Name</label>
            <input type="text" class="form-control" [(ngModel)]="newCategory.name" name="name" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea class="form-control" rows="3" [(ngModel)]="newCategory.description" name="description"></textarea>
          </div>
          <div class="mb-3">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" [(ngModel)]="newCategory.isActive" name="isActive" id="isActive">
              <label class="form-check-label" for="isActive">
                Active
              </label>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeModals()">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="addCategory()">Add Category</button>
      </div>
    </div>
  </div>
</div>

<!-- Edit Category Modal -->
<div class="modal fade" [class.show]="showEditModal" [style.display]="showEditModal ? 'block' : 'none'" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Category</h5>
        <button type="button" class="btn-close" (click)="closeModals()"></button>
      </div>
      <div class="modal-body">
        <form *ngIf="selectedCategory">
          <div class="mb-3">
            <label class="form-label">Category Name</label>
            <input type="text" class="form-control" [(ngModel)]="selectedCategory.name" name="name">
          </div>
          <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea class="form-control" rows="3" [(ngModel)]="selectedCategory.description" name="description"></textarea>
          </div>
          <div class="mb-3">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" [(ngModel)]="selectedCategory.isActive" name="isActive" id="editIsActive">
              <label class="form-check-label" for="editIsActive">
                Active
              </label>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeModals()">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="updateCategory()">Save Changes</button>
      </div>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" [class.show]="showDeleteModal" [style.display]="showDeleteModal ? 'block' : 'none'" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirm Delete</h5>
        <button type="button" class="btn-close" (click)="closeModals()"></button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete category <strong>{{ selectedCategory?.name }}</strong>?</p>
        <p class="text-danger"><i class="fas fa-exclamation-triangle"></i> This may affect associated products.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeModals()">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="deleteCategory()">Delete</button>
      </div>
    </div>
  </div>
</div>

<div class="modal-backdrop fade" [class.show]="showAddModal || showEditModal || showDeleteModal" *ngIf="showAddModal || showEditModal || showDeleteModal"></div>
